#!/bin/bash

# Define the models to test
MODELS=(
  "llama3-70b-8192"
  "llama3-8b-8192"
  "mixtral-8x7b-32768"
  "gemma-7b-it"
  "claude-3-opus-20240229"
  "claude-3-sonnet-20240229"
  "claude-3-haiku-20240307"
)

# Submit a job for each model
for MODEL in "${MODELS[@]}"; do
  # Create a copy of the template file
  cp run_groq_quiz.sh run_groq_quiz_${MODEL}.sh
  
  # Replace the template values with actual model name
  sed -i "s/\$MODEL/${MODEL}/g" run_groq_quiz_${MODEL}.sh
  
  # Submit the job
  JOBID=$(sbatch run_groq_quiz_${MODEL}.sh)
  
  echo "Submitted job for model ${MODEL}: ${JOBID}"
  
  # Optional: Add a small delay between submissions to stagger API calls
  sleep 2
done